{
    "swagger": "2.0",
    "info": {
        "description": "Kubernetes Pod \u0026 Node metrics viewer backend",
        "title": "fl-kube-reader-backend API",
        "contact": {},
        "version": "1.0"
    },
    "basePath": "/api/v1",
    "paths": {
        "/healthz": {
            "get": {
                "description": "Basic health endpoint to verify service is alive",
                "tags": [
                    "system"
                ],
                "summary": "Health check",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "/logs/pod": {
            "get": {
                "description": "Returns container logs for a pod. Supports tailing N lines and fetching previous container logs.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "logs"
                ],
                "summary": "Get pod logs",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Pod name",
                        "name": "pod",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Container name (optional)",
                        "name": "container",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Tail last N lines (default: 0 = all)",
                        "name": "tail",
                        "in": "query"
                    },
                    {
                        "type": "boolean",
                        "description": "Get logs from the previously terminated container",
                        "name": "previous",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Log payload",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/metrics-viewing/nodes/usage": {
            "get": {
                "description": "Returns CPU \u0026 memory usage and allocatable resources for all nodes in the cluster.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "metrics"
                ],
                "summary": "Get cluster node resource usage",
                "responses": {
                    "200": {
                        "description": "Nodes usage list",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/metrics-viewing/pods/usage": {
            "get": {
                "description": "Returns CPU (milli) + memory (bytes) usage for a specific pod. If container is provided, returns usage only for that container.",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "metrics"
                ],
                "summary": "Get pod resource usage",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Pod name",
                        "name": "pod",
                        "in": "query",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "Container name (optional)",
                        "name": "container",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Pod usage",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Server error",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/pod-viewing": {
            "get": {
                "description": "Returns pods filtered by namespace, component, and instance",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "pods"
                ],
                "summary": "List pods",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Namespace (default: default)",
                        "name": "namespace",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "K8s component label: app.kubernetes.io/component",
                        "name": "component",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "K8s instance label: app.kubernetes.io/instance",
                        "name": "instance",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List of pods",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    },
                    "500": {
                        "description": "Failed to retrieve pods",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/{any}": {
            "get": {
                "description": "Handles unknown routes and returns 404 JSON payload",
                "tags": [
                    "system"
                ],
                "summary": "Not Found handler",
                "responses": {
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/response.ErrorResponse"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "response.ErrorResponse": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "string"
                }
            }
        }
    }
}